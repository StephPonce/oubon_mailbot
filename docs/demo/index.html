<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Oubon × TikTok Demo</title>
<style>
  :root{
    --bg:#0b0c10; --card:#14161a; --text:#e6e8eb; --muted:#a8b0b8; --brand:#25F4EE; --brand2:#FE2C55;
    --border:#23262b; --chip:#1d2026;
  }
  *{box-sizing:border-box} body{margin:0;background:#0b0c10;color:var(--text);
    font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .wrap{max-width:980px;margin:36px auto;padding:0 18px}
  header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  header img{width:44px;height:44px;border-radius:10px;background:#111;object-fit:cover}
  h1{font-size:22px;margin:0}
  .badge{display:inline-flex;gap:8px;background:var(--chip);border:1px solid var(--border);
    border-radius:999px;padding:6px 10px;margin-top:6px}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin-top:16px}
  .card{grid-column:span 12;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px}
  @media(min-width:900px){.half{grid-column:span 6}}
  h2{font-size:18px;margin:0 0 8px}
  p{margin:8px 0;color:var(--muted)}
  button,.btn{background:#1f242b;border:1px solid var(--border);color:var(--text);
    padding:9px 13px;border-radius:10px;cursor:pointer}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0}
  .scope{background:var(--chip);border:1px solid var(--border);padding:6px 10px;border-radius:999px}
  code,pre{background:#0e1014;border:1px solid var(--border);border-radius:10px;padding:10px;overflow:auto}
  .muted{color:var(--muted)}
  .kpi{display:flex;gap:12px;flex-wrap:wrap}
  .kv{background:var(--chip);border:1px solid var(--border);border-radius:10px;padding:8px 12px}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <img src="../logo.png" onerror="this.src='../logo.svg';" alt="Oubon logo">
    <div>
      <h1>Oubon × TikTok Integration Demo</h1>
      <div class="badge"><span id="domainSpan"></span></div>
    </div>
  </header>

  <div class="grid">
    <section class="card half" id="loginCard">
      <h2>Login Kit</h2>
      <p>OAuth connect and post-auth state (sandbox).</p>
      <div class="row" id="loginBtns">
        <a class="btn" href="./oauth.html">Start OAuth (sandbox)</a>
        <button onclick="connectMock()">Simulate Connect</button>
      </div>
      <div id="loginState" style="display:none">
        <p>Connected as <b>@sandbox_user</b> (mock). Access token stored server-side (simulated).</p>
      </div>
      <p class="muted">Tip: open with <code>?connected=1</code> to preload connected state.</p>
    </section>
    <section class="card half">
      <h2>Display API</h2>
      <p>Fetch profile + recent videos (mocked for review).</p>
      <div class="row">
        <button onclick="showProfile()">Fetch Profile</button>
        <button onclick="showVideos()">Fetch Recent Videos</button>
      </div>
      <div class="kpi">
        <div class="kv"><b>Followers</b> <span id="kpiFollowers">—</span></div>
        <div class="kv"><b>Likes</b> <span id="kpiLikes">—</span></div>
        <div class="kv"><b>Videos</b> <span id="kpiVideos">—</span></div>
      </div>
      <pre id="displayOut">/* Click a button above */</pre>
    </section>

    <section class="card half">
      <h2>Share Kit</h2>
      <p>Share product content from Oubon to TikTok with a caption.</p>
      <div class="row">
        <button onclick="openShare()">Share This Product</button>
      </div>
      <pre id="shareOut">/* Click “Share This Product” */</pre>
    </section>

    <section class="card half">
      <h2>Content Posting API</h2>
      <p>Upload short video w/ caption (mocked server flow for review).</p>
      <form onsubmit="return uploadMock(event)">
        <div class="row">
          <input type="file" accept="video/*" required>
          <input type="text" id="caption" placeholder="Caption (e.g., New drop — 20% off!)"
            style="flex:1;padding:10px;border-radius:10px;border:1px solid #23262b;background:#0f1318;color:#e6e8eb">
          <button type="submit">Upload (sandbox)</button>
        </div>
      </form>
      <pre id="uploadOut">/* Choose a file then Upload */</pre>
    </section>

    <section class="card">
      <h2>Requested Products & Scopes</h2>
      <div class="row">
        <span class="scope">Login Kit</span>
        <span class="scope">Display API</span>
        <span class="scope">Share Kit</span>
        <span class="scope">Content Posting API</span>
      </div>
      <div class="row">
        <span class="scope">user.info.basic</span>
        <span class="scope">video.list</span>
        <span class="scope">video.upload</span>
        <span class="scope">video.publish</span>
      </div>
      <p class="muted">
        Demo env: <b>Sandbox / mocked</b> · Domain: <b id="domainText"></b><br>
        Privacy: <a href="https://policies.oubonshop.com/privacy.html" target="_blank">Privacy Policy</a> ·
        Terms: <a href="https://policies.oubonshop.com/terms.html" target="_blank">Terms of Service</a>
      </p>
    </section>
  </div>

  <p class="muted">Support: <a href="mailto:support@oubonshop.com">support@oubonshop.com</a></p>
</div>
<script>
  const qs = new URLSearchParams(location.search);
  document.getElementById('domainText').textContent = location.hostname;
  document.getElementById('domainSpan').textContent = location.origin.replace(/^https?:\/\//,'');

  function setConnectedUI(){ 
    document.getElementById('loginBtns').style.display='none';
    document.getElementById('loginState').style.display='block';
  }
  function connectMock(){ setConnectedUI(); }
  if(qs.get('connected')==='1') setConnectedUI();

  function showProfile(){
    const profile={ username:"sandbox_user", nickname:"Oubon Demo", followers:12400, likes:87210, videos:57 };
    document.getElementById('kpiFollowers').textContent=profile.followers.toLocaleString();
    document.getElementById('kpiLikes').textContent=profile.likes.toLocaleString();
    document.getElementById('kpiVideos').textContent=profile.videos;
    document.getElementById('displayOut').textContent=JSON.stringify(profile,null,2);
  }
  function showVideos(){
    const items=[
      {id:"vid_001", title:"Fall Collection Sneak Peek", views:15600, url:"#"},
      {id:"vid_002", title:"Unboxing — Oubon Hoodie", views:8300, url:"#"},
      {id:"vid_003", title:"Styling Tips (30s)", views:12100, url:"#"}
    ];
    document.getElementById('displayOut').textContent=JSON.stringify({items},null,2);
  }
  function openShare(){
    const payload={ title:"Share to TikTok", caption:"New Oubon drop! #oubon #streetwear", url:location.origin+"/demo/product/123" };
    document.getElementById('shareOut').textContent=JSON.stringify(payload,null,2);
  }
  function uploadMock(e){
    e.preventDefault();
    const caption=document.getElementById('caption').value||"Oubon — new drop";
    const result={ status:"queued", upload_id:"upl_"+Math.random().toString(36).slice(2,8), caption, note:"Server would call upload+publish." };
    document.getElementById('uploadOut').textContent=JSON.stringify(result,null,2);
    return false;
  }
</script>
</body>
</html>
